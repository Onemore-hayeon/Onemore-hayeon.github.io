---
# layout: single
# title:  "하린 테스트"

title : forensic 01
# date : YYYY-MM-DD HH:MM:SS +/-TTTT
# categories : [TOP_CATEGORIE, SUB_CATEGORIE]
tags : [forensic] #소문자만 가능
---

# 디지털포렌식 이론 01


>## 디지털 포렌식이란?
 ### 1. 디지털 매체(컴퓨터, 핸드폰, 카메라,..)를 통해 발생한 법적 증거를 수집하는 모든 행위
 
 <br>

 ### 2. 컴퓨터를 매개로 이루어지는 범죄에 대한 법적 증거자료 확보를 위해 컴퓨터 저장매체와 네트워크로부터 자료를 수집, 분석, 보존하여 법정 증거물로서 제출할 수 있도록 하는 일련의 절차와 행위

</br>
*포렌식을 하기 전, 포렌식의 목적과 필요화에 대해 알아보자.*

--------

**[보안 3요소]**

	- 기밀성 : 인가된 사용자만 사용하도록
	- 무결성 : 변조, 부인 방지 (즉, 변하지 않는)
	- 가용성 : 언제든지 사용할 수 있는 환경
    
    ---> 포렌식은 이 중, 특히 무결성에 초점을 두고있다.

</br>
그렇기 때문에, 

	1. 파일이 오염되지 않도록 하기 위해 원본에 대한 백업본을 항상 만들어두어야 한다.
	2. 허가가 날때까지 함부로 건드리지 않아야 한다.
</br>

-----

</br>

**[포렌식의 목적]**

	- 범죄수사를 위하여
	- 증거를 확보하여 법적 대응이 가능하도록
		○ 보통 증거 확보시, 원본 데이터에 대한 백업을 두개를 떠놓는다.
		○ 백업 두개 중 하나는 "법적 제출용(원본상태 그대로)", 다른 하나는 "데이터 분석용"으로 나뉜다.
</br>

**[포렌식의 필요화]**

	- 컴퓨터 관련 범죄 증가 및 증거자료의 디지털화
		○ 디지털화가 많이 이루어져있기 때문에, 포렌식의 필요성이 증가함
	- 디지털 포렌식 기술의 활용도 증가
		○ 회계 감사, 보험사기, 내부정보 유출 등..



----------



>## 포렌식에는 5가지 원칙이 존재한다.

1. 정당성의 원칙
2. 무결성의 원칙
3. 신속성의 원칙
4. 재현의 원칙
5. 연계보관성의 원칙
	

하나씩 살펴보도록 하자

<br>

>1. 정당성의 원칙
 
 : 획득한 증거자료가  준법절차를 준수하여 수집한 자료여야 하며, 위법한 방법으로 수집된 증거물은 법적 효력을 상실한다. 
	
    
    *관련된 법조항*
	
	1) 위법수집증거배제법칙(형사소송법 제308조의 2)
	- 적법한 절차에 따르지 아니하고 수집한 증거는 증거로 할 수 없다.
	판례 : 압수물의 사진 및 압수조서가 위법한 수색에 의한 압수물을 직접 이용해서 촬영되거나 작성된 경우 그 형태 등에 관한 증거가치에는 변함이 없다고 하더라도 그 증거가치는 부정된다. (서울 중앙지방법원 2006노2113)
	
	2) 독수 독과이론 (형사소송법상의 증거법칙으로서, 독과수이론이라고도 한다.)
	- 위법하게 수집된 증거(독수)에 의하여 발견된 제2차 증거(독과)의 증거능력은 인정할 수 없다는 이론
	(그렇지만 어느 상황에서나 예외는 존재할 수 있다는것을 기억해두자!)
	(*출처 : https://aaasssddd25.tistory.com/3, Khan's Blog)
	
<br>

>2. 무결성의 원칙

 : 수집한 증거가 위조/변조되지 않았음을 증명할 수 있어야 한다. 보통 포렌식의 무결성 증명으로는 *hash코드가 있다. 같은 파일인데 hash가 틀린 경우 등을 통해 변조 여부를 확인한다.
	
	 무결성의 원칙과 관련해서, 수사관이 현장에 들어가자마자 해야할 일은 다른무엇보다 "백업"이다. 핫백업(컴퓨터가 동작한 상태에서 백업)과 콜드백업(전원이 들어오지 않은 상태에서 백업(ex. 하드디스크 덤프))을 진행하게 된다.
	 백업도 위에서 말했다싶이, 두가지 용도로 백업을 진행하는데, "원본상태를 그대로 보존해둔 사본"과 "분석용으로 사용할 사본" 용도로 백업을 해둔다. 이 백업과정을 통해서도 무결성을 지킬 수 있다.
	 또한.. 자료를 운송하고 보관하는 과정에 있어서 무결성을 증명하기 위해 해당 파일의 hash값 또한 기재해두어야 한다.
	
	*hash 함수란?*
	 : 평문을 해시 알고리즘을 통해 해시값으로 출력하는것인데, 동일한 문장에서는 동일한 해시값으로 출력하며, 문장에서 점 하나만 추가되어도 해시값이 완전히 바뀌게 된다. 그렇기때문에 hash값이 같음을 통해 무결성을 증명해 낼 수 있는 것이다.

<br>

>3. 신속성의 원칙
 
 : 휘발성 증거를 수집하기 위해서는 신속성이 요구된다. 그렇기에 모든 과정은 지체없이 신속하게 진행되어야 한다. 추가로, 포렌식에서는 시간정보가 굉장히 중요하다는 점도 유의하도록 하자!
	
<br>

>4. 재현의 원칙

 : 피해 직전과 같은 조건에서 현장검증을 실시할 경우, 동일한 결과가 나와야 한다.

<br>

>5. 연계보관성의 원칙(절차연속성의 원칙)

 : 증거물, 이송, 분석, 보관, 법정제출 각 단계에서 담당자 및 책임자가 명확하게 명시되어야 한다. 어떠한 작업을 누가 담당했는지가 명시되어있지 않으면 문제가 생길 시 조치를 취하기 힘들어진다. 그렇기때문에, 각 단계별로 인수인계 시, 담당자와 해당 내용을 정확히 전달해야 한다.
	
<br>

----------

<br>


# **[디지털 포렌식 유형]**
디지털 포렌식은 분석 목적과 분석 대상에 따라 유형이 달라지게 된다.

<br>

> ## 분석목적(포렌식을 하는 이유)
<br>

1. 사고대응 포렌식(침해사고)
	
        해킹 등 침해 시스템의 로그파일 등을 조사하여 신원, 피해내용, 경로 등을 파악해낸다.
	
        이를 수행하기 위해서는 네트워크 기술과 서버의 로그분석 기술, 기타 OS에 대한 지식이 필요하다.
	
2. 증거(정보)추출 포렌식
	
        범행 입증에 필요한 증거를 찾기 위해 디지털 저장매체에 기록된 데이터를 복구하거나 검색한다.
	
        데이터를 복구, 검색하여 증거를 찾아내는것이 특징이다.
	
	<br>

>## 분석대상
1. 디스크포렌식

	    a. 비휘발성 저장매체로부터 자료를 획득, 분석, 검색, 삭제된 파일을 복구
	
        b. 삭제 파일 복구, 파일의 파일명/확장자/작성자/작성일시 등의 기준으로 분류(=타임라인), 키워드 검색을 통해 수사 단서를 추출
	
        c. 보통 두개의 사본을 만듦 (원본사본, 분석사본)
		
2. 네트워크포렌식 
	
        a. 네트워크를 통해 전송되는 데이터 암호 등을 
		
            i. 특정 도구를 이용해 가로채거나 
		
            ii. 서버에 로그형태로 저장된것에 접근하여 분석
		
            iii. 네트워크 형태 등을 조사하여 단서를 찾아낸다.
			
3. 인터넷포렌식(*현재는 디스크 포렌식에 포함됨)
	
        a. was, ftp, www
	
        b. 서버 어플리케이션을 분석한다.
		
            i. 불법 업로드 추적
		
            ii. 명예회손 글을 올린 용의자 추적
		
            iii. 전자메일 발신 추적
		
            iv. 인터넷 서핑내역 추적
			
4. 모바일포렌식
	
        a. 스마트폰과 같은 휴대용 기기에서 필요한 정보를 입수하여 분석하는 분야
	
        b. 2017년 이후 암호화가 되어서 데이터 분석이 어려워졌다.
		
5. 데이터베이스포렌식
	
        a. DB로부터 데이터를 추출/분석하여 증거를 획득하는 분야
	
        b. 사내 ERP같은 회계시스템과 같은 DB관리 시스템에 대한 제어 기술
		
6. 암호학포렌식
	
        a. 시스템에서 암호를 찾아내거나 크랙하는 분야
		
7. 회계포렌식
	
        a. 기업의 부정과 관련된 수사를 할때
	
        b. 회게사 등 회계 전문가가 분석할 수 있도록 데이터를 정제함
	
        c. 회계 시스템에 대한 프로그램 개발경험이나 운영한 경험이 필요하거나 전문가가 필요함
		
8. 메모리포렌식
	
        a. 메모리에 로드되는 정보들을 분석할때 활용
	
        b. 휘발성과 비휘발성 정보를 한번에 분석가능
	
            i. 휘발성 : 프로세스, 네트워크 등
	
    	    ii. 비휘발성 : 하드디스크, 파일 등
		

-------------------------------------------

<br>

# [디지털 포렌식 절차]

 디지털 포렌식은 절차대로 진행이 된다. 이번에는 디지털 포렌식의 절차에 대해 알아보자!

<br>

1. 조사준비

        사건 발생 및 확인, 조사권한 획득, 조사팀 구성, 장비/도구 준비, 도구 개발 및 교육훈련

2. 현장대응
        
        현장통제와 보존, 관계자 협조 요청, 조사대상매체 파악

3. 증거확보 및 수집
        
        시스템&저장매체 확보, 데이터 선별 수집, 증거물 포장과 봉인, 증거물 목록 작성

4. 이송 및 보관

        증거물 운반, 증거물 목록 확인 및 등록, 원본 보관

5. 분석 및 조사
        
        저장매체 수리, 사본 생성, 데이터 추출 및 분류, 상세분석

6. 보고서 작성
        
        분석보고서 작성 및 제출, 증거 관련 자료 보관, 법적 증언


**침해사고 대응 절차**

        사고전 준비 -> 사고탐지 -> 초기대응 -> 대응전략 체계화 -> 사고조사(데이터수집, 데이터분석) -> 보고서 작성

<br>

---------------

<br>

**[수사준비]**

    관리적/기술적으로 준비
    컴퓨터 포렌식에 사용되는 각종 소프트웨어 또는 하드웨어를 준비하고 점검

	1. 전문인력과  포렌식 도구의 활용방안수립 
		- 시스템, 네트워크, DB, 회계 등 각 분야 다양한 기술을 가진 전문가들이 조사관으로 참여한다.
    	- 각각 전문 도구를 이용하여 신속 정확하게 증거 수집

	2. 보관의 연속성 방안수립
		- 증거를 가져간 시간, 돌려준 시간, 소지한 이유 등을 정확히 기록함으로써 증거 훼손이 되지 않음을 증명 
		- 즉, 무결성 입증을 위한 방안 수립

	3. 데이터 무결성 유지방안수립
	    - 확보된 데이터 증거능력을 확보하고 공판과정에서 공소사실을 입증하는 증거 가치를 부여하기 위해 
	    - 무결성을 입증할수 있는 다양한 방법을 결정 (이때 hash코드가 많이 쓰이게 됨)
    	- 압수수색영장,진술서양식,자문가연락처,관리자승인,현장채증준비,증거분석 툴 등을 준비
	
    
<!-- *Hash코드를 간단하게 확인해보자.
	    ( 'hash_test' 라는 파일 생성 후 동일한 내용으로 복사본을 만들어준 뒤, 두 파일의 hash값을 확인)


 *이미지 삽입 방법 찾아보기 *


	 현재 두 파일의 내용이 동일하고, hash값도 동일한것을 확인
	
	(hast_test 복사본에 "." 하나를 추가한 뒤 다시한번 확인해보자)
	
	 이처럼 같은 내용에서 "."하나만 추가되어도 hash값은 완전히 바뀌게 된다. -->





**[증거물획득]**

    피해사고 발생 장소 또는 용의자 컴퓨터를 압수하는 현장에서 
    각종 저장매체와 시스템에 남아 있는 디지털 증거를 획득하는 단계

	1. 휘발성 정보 수집 : hot백업
		○ 전원을 차단할경우 날아가는 프로세스 메모리 자원 등을 수집
			* 현장에서 전원을 끄거나 하는 행동은 절대 하면 안됨!
		
        ○ 또한, 컴퓨터 내 Path 경로가 변조되어있을 수 있으니 대상 컴퓨터의 명령어를 그대로 쓰지 않고, Path에 저장되어있는 경로 및 명령어를 따로 가져가서 다른 PC를 통해 명령을 실행한다.
			* Path는 시스템 환경변수 Path에서 단축경로를 만들어 명령어를 바로바로 사용할 수 있도록 만드는것
			* 대상 PC의 Path 경로와 명령어들을 따로 가져가서 다른 PC에 Path를 걸고 명령을 실행하면서 분석 시도
				□ >> 이러한 절차로 오염되지 않은 경로 확인이 가능하다.
				□ 그렇기때문에, 휘발성 데이터를 수집할땐 대상PC 안에있는 명령어를 직접적으로 쓰면 위험할 수 있다. (명령어 변조 가능성 有)
			
<!-- 
        (여기도 이미지 삽입)
			시스템 환경변수 Path는 (시스템속성>환경변수>)사진 속 표시된 부분을 이야기한다.
			해당 경로를 삭제하고 수정할 수 있어서 변조가 가능하다는 점을 이야기함.. -->
			
			
	2. 디스크 이미징 (=비휘발성 정보 수집) : cold 백업
		a. 정확한 사본을 2개 만들어 조사를 한다. 
			i. 보관용, 분석용
			
	3. 증거의 무결성
		a. 해쉬코드 등록 및 검증알고리즘 매체에 적용, 보관하여 무결성 확보


-------------------------------------------






	
